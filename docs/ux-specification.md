# UX Specification - Windows Search Tool

**项目:** Windows Search Tool
**项目级别:** Level 2
**日期:** 2025-10-16
**版本:** 1.0
**状态:** Draft

---

## 1. UX 概述

### 1.1 设计理念

Windows Search Tool 的用户体验设计基于以下核心原则：

1. **简单直观** - 遵循 Windows 11 设计语言，用户无需学习即可上手
2. **快速响应** - 所有操作提供即时反馈，减少等待焦虑
3. **信息分层** - 渐进式展示信息，避免认知过载
4. **容错友好** - 提供清晰的错误提示和恢复选项
5. **智能辅助** - 通过 AI 减少用户思考负担

### 1.2 目标用户

**主要用户画像:**
- 年龄：25-45 岁
- 职业：知识工作者（项目经理、研究员、律师等）
- 技术水平：中等
- 使用场景：文档密集型工作环境
- 主要需求：快速查找历史文档内容

### 1.3 核心用户流程

1. **首次使用流程:** 启动应用 → 创建首个索引 → 等待索引完成 → 执行首次搜索
2. **日常使用流程:** 启动应用 → 输入搜索关键词 → 查看结果 → 获取内容
3. **维护流程:** 刷新索引 → 管理多个索引 → 查看统计信息

---

## 2. 信息架构

### 2.1 应用结构

```
┌─────────────────────────────────────────────────────┐
│  菜单栏                                              │
├─────────────────────────────────────────────────────┤
│  工具栏                                              │
├──────────────────┬──────────────────────────────────┤
│                  │                                  │
│   左侧面板        │        主内容区                  │
│                  │                                  │
│  - 索引列表      │   - 搜索界面                     │
│  - 索引统计      │   - 结果列表                     │
│  - 快捷操作      │   - 详细视图                     │
│                  │                                  │
│                  │                                  │
├──────────────────┴──────────────────────────────────┤
│  状态栏                                              │
└─────────────────────────────────────────────────────┘
```

### 2.2 导航层级

```
主窗口
├── 文件菜单
│   ├── 新建索引
│   ├── 打开索引
│   ├── 关闭索引
│   ├── 导出结果
│   └── 退出
├── 编辑菜单
│   ├── 设置
│   └── 偏好设置
├── 视图菜单
│   ├── 切换主题
│   ├── 显示/隐藏侧边栏
│   └── 全屏模式
├── 工具菜单
│   ├── 刷新索引
│   ├── 合并索引
│   ├── 索引统计
│   └── 清理缓存
└── 帮助菜单
    ├── 使用说明
    ├── 快捷键
    ├── 检查更新
    └── 关于
```

---

## 3. 界面设计规范

### 3.1 视觉设计

#### 3.1.1 颜色系统

**浅色主题 (Light Theme)**
```
主色调（Primary）:     #0078D4 (Windows Blue)
次要色（Secondary）:   #005A9E (Darker Blue)
成功色（Success）:     #107C10 (Green)
警告色（Warning）:     #FF8C00 (Orange)
错误色（Error）:       #D13438 (Red)
背景色（Background）:  #F3F3F3 (Light Gray)
表面色（Surface）:     #FFFFFF (White)
文本色（Text）:        #000000 (Black)
次要文本（Secondary）: #666666 (Gray)
边框色（Border）:      #E0E0E0 (Light Gray)
```

**深色主题 (Dark Theme)**
```
主色调:     #3A96DD
次要色:     #2B7DBD
背景色:     #1E1E1E
表面色:     #2D2D2D
文本色:     #FFFFFF
次要文本:   #B0B0B0
边框色:     #3F3F3F
```

#### 3.1.2 字体系统

```
字体家族: Microsoft YaHei, Segoe UI, sans-serif

标题 H1: 24px, Bold
标题 H2: 20px, Bold
标题 H3: 16px, Semi-Bold
正文:    14px, Regular
小字:    12px, Regular
标签:    11px, Regular
```

#### 3.1.3 间距系统

```
xs:  4px
sm:  8px
md:  16px
lg:  24px
xl:  32px
xxl: 48px
```

#### 3.1.4 圆角

```
小圆角: 4px  (按钮、输入框)
中圆角: 8px  (卡片、面板)
大圆角: 12px (对话框)
```

### 3.2 组件设计

#### 3.2.1 按钮 (Button)

**主要按钮 (Primary Button)**
```
尺寸: 高度 32px, 内边距 16px
颜色: 背景 #0078D4, 文字 #FFFFFF
悬停: 背景 #005A9E
按下: 背景 #004578
禁用: 背景 #CCCCCC, 文字 #999999
圆角: 4px
```

**次要按钮 (Secondary Button)**
```
尺寸: 高度 32px, 内边距 16px
颜色: 背景 #FFFFFF, 文字 #0078D4, 边框 1px #0078D4
悬停: 背景 #F3F3F3
```

**图标按钮 (Icon Button)**
```
尺寸: 32x32px
颜色: 图标 #666666
悬停: 背景 #F3F3F3, 图标 #000000
```

#### 3.2.2 输入框 (Input)

```
尺寸: 高度 36px, 内边距 12px
边框: 1px solid #E0E0E0
圆角: 4px
悬停: 边框 #AAAAAA
聚焦: 边框 2px #0078D4
错误: 边框 2px #D13438
```

#### 3.2.3 下拉菜单 (Dropdown)

```
触发器: 同输入框样式
菜单:
  - 背景: #FFFFFF
  - 阴影: 0 4px 12px rgba(0,0,0,0.15)
  - 最大高度: 300px
  - 滚动条: 8px 宽
项目:
  - 高度: 36px
  - 内边距: 12px
  - 悬停: 背景 #F3F3F3
  - 选中: 背景 #E6F4FF, 文字 #0078D4
```

#### 3.2.4 复选框/单选框 (Checkbox/Radio)

```
尺寸: 18x18px
边框: 2px solid #666666
圆角:
  - 复选框: 2px
  - 单选框: 50% (圆形)
选中:
  - 背景: #0078D4
  - 勾选标记: #FFFFFF
```

#### 3.2.5 进度条 (Progress Bar)

```
高度: 4px
背景: #E0E0E0
进度: #0078D4
圆角: 2px
动画: 平滑过渡 0.3s
```

#### 3.2.6 表格 (Table)

```
表头:
  - 背景: #F8F8F8
  - 文字: 12px Bold #666666
  - 高度: 40px
  - 边框底部: 2px solid #E0E0E0
行:
  - 高度: 48px
  - 边框: 1px solid #F0F0F0
  - 悬停: 背景 #F8F8F8
  - 选中: 背景 #E6F4FF
内边距: 12px
```

#### 3.2.7 卡片 (Card)

```
背景: #FFFFFF
边框: 1px solid #E0E0E0
圆角: 8px
阴影: 0 2px 8px rgba(0,0,0,0.08)
内边距: 16px
```

---

## 4. 主要界面设计

### 4.1 主窗口 (Main Window)

#### 4.1.1 布局结构

```
┌───────────────────────────────────────────────────────────┐
│ 文件  编辑  视图  工具  帮助                    [_][□][×] │ 标题栏
├───────────────────────────────────────────────────────────┤
│ [+新建索引] [刷新] [设置]        [浅色/深色] [在线/离线] │ 工具栏
├─────────────────────┬─────────────────────────────────────┤
│ 我的索引 ▼           │ 🔍 [搜索框...]               [搜索] │
│ ┌─────────────────┐ │                                     │
│ │☑ 工作文档        │ │ ┌─────────────────────────────────┐ │
│ │  📊 5,432 文件   │ │ │  搜索结果 (125 个结果, 0.5秒)    │ │
│ │  💾 2.3 GB       │ │ ├─────────────────────────────────┤ │
│ │  🕐 2天前       │ │ │  季度报告_2024.docx         95% │ │
│ │                  │ │ │  ...销售数据显示第二季度增长... │ │
│ │☐ 个人文件        │ │ │  📄 Word文档 | 2024-06-15        │ │
│ │  📊 2,156 文件   │ │ ├─────────────────────────────────┤ │
│ │  💾 980 MB       │ │ │  项目方案_销售策略.pptx     89% │ │
│ │  🕐 1周前       │ │ │  ...季度报告中提到的销售指标... │ │
│ └─────────────────┘ │ │  📊 PPT文档 | 2024-05-22         │ │
│                     │ │ ├─────────────────────────────────┤ │
│ [+ 新建索引]        │ │ │  ...更多结果...                  │ │
│                     │ │ └─────────────────────────────────┘ │
│                     │ │                                     │
│                     │ │  [<] [1] [2] [3] [>]     每页20条  │ │
├─────────────────────┴─────────────────────────────────────┤
│ 就绪 | 索引: 2个 | 文档: 7,588个 | 大小: 3.3GB | 在线模式  │ 状态栏
└───────────────────────────────────────────────────────────┘
```

#### 4.1.2 菜单栏 (Menu Bar)

**位置:** 窗口顶部
**高度:** 32px
**背景:** 浅色主题 #FFFFFF, 深色主题 #2D2D2D

**菜单项:**
- 文件 | 编辑 | 视图 | 工具 | 帮助
- 字体: 14px
- 间距: 菜单项间距 24px

#### 4.1.3 工具栏 (Toolbar)

**位置:** 菜单栏下方
**高度:** 48px
**背景:** #F8F8F8 (浅色), #252525 (深色)
**边框:** 底部 1px #E0E0E0

**按钮组:**
- 左侧: [+ 新建索引] [🔄 刷新] [⚙ 设置]
- 右侧: [🌙 浅色/深色] [🌐 在线/离线]
- 按钮间距: 8px
- 按钮高度: 32px

#### 4.1.4 状态栏 (Status Bar)

**位置:** 窗口底部
**高度:** 28px
**背景:** #F0F0F0 (浅色), #1E1E1E (深色)

**内容布局:**
```
[状态文本] | [统计信息] | [模式指示器]
```

**示例:**
```
就绪 | 索引: 2个 | 文档: 7,588个 | 大小: 3.3GB | 🌐 在线模式
索引中... 45% | 已处理: 2,450/5,432 文件 | 剩余时间: 约5分钟
```

### 4.2 左侧索引面板 (Index Panel)

#### 4.2.1 面板布局

**宽度:** 280px (可调整, 最小 240px, 最大 400px)
**背景:** #FAFAFA (浅色), #252525 (深色)
**边框:** 右侧 1px #E0E0E0

#### 4.2.2 索引列表项

```
┌─────────────────────────────────┐
│ ☑ 工作文档              [︙]    │  ← 标题行
│ ──────────────────────────────  │
│ 📊 5,432 文件  💾 2.3 GB        │  ← 统计行
│ 🕐 最后更新: 2天前              │  ← 时间行
│ 📁 D:\Documents\Work            │  ← 路径行
└─────────────────────────────────┘
```

**交互状态:**
- **默认:** 背景 #FFFFFF, 边框 1px #E0E0E0
- **悬停:** 背景 #F3F3F3, 显示更多操作按钮
- **选中:** 背景 #E6F4FF, 左侧 3px 蓝色边框
- **索引中:** 底部显示进度条

**操作菜单 (点击 [︙]):**
```
- 刷新索引
- 重命名
- 查看详情
- 导出
- 删除
```

#### 4.2.3 新建索引按钮

**位置:** 索引列表底部
**样式:**
- 宽度: 100%
- 高度: 40px
- 边框: 1px dashed #AAAAAA
- 文字: [+] 新建索引
- 悬停: 背景 #F3F3F3, 边框实线

### 4.3 搜索界面 (Search Panel)

#### 4.3.1 搜索栏

```
┌─────────────────────────────────────────────────────┐
│ 🔍 [输入关键词搜索...]                   [高级] [搜索] │
└─────────────────────────────────────────────────────┘
```

**搜索输入框:**
- 宽度: 占据大部分空间
- 高度: 40px
- 字体: 16px
- 占位符: "输入关键词搜索..."
- 图标: 左侧放大镜图标 🔍

**功能:**
- 自动完成: 显示搜索历史
- 实时搜索: 输入停止 300ms 后自动搜索
- 快捷键: Ctrl+F 聚焦搜索框, Enter 执行搜索

**高级选项按钮:**
- 点击展开高级搜索选项面板
- 包含: 文件类型、日期范围、排序方式等

#### 4.3.2 高级搜索选项 (展开式)

```
┌─────────────────────────────────────────────────────┐
│ 搜索模式: (●) 模糊搜索  ( ) 精确搜索  ( ) 短语搜索    │
│                                                       │
│ 文件类型: [全部 ▼] ☑Word ☑Excel ☑PPT ☑PDF ☑TXT      │
│                                                       │
│ 修改时间: [任何时间 ▼]                                │
│           - 最近24小时                                │
│           - 最近7天                                   │
│           - 最近30天                                  │
│           - 自定义范围                                │
│                                                       │
│ 排序方式: [相关度 ▼]                                  │
│           - 相关度 (默认)                             │
│           - 修改时间 (新到旧)                         │
│           - 修改时间 (旧到新)                         │
│           - 文件名 (A-Z)                              │
│                                                       │
│ ☐ 使用 AI 语义搜索 (需在线)                           │
│                                                       │
│          [重置]  [应用]                               │
└─────────────────────────────────────────────────────┘
```

#### 4.3.3 搜索结果列表

**结果头部:**
```
┌─────────────────────────────────────────────────────┐
│ 搜索结果 (125 个结果, 0.5秒)       [列表视图 ▼] [导出]│
└─────────────────────────────────────────────────────┘
```

**结果项:**
```
┌─────────────────────────────────────────────────────┐
│ 季度报告_2024.docx                            95% ⭐ │
│ ─────────────────────────────────────────────────── │
│ ...销售数据显示第二季度实现了 35% 的增长，主要      │
│ 得益于新产品线的推出。季度报告详细分析了...        │
│                                                     │
│ 📄 Word文档 | 💾 2.5 MB | 🕐 2024-06-15 14:30      │
│ 📁 D:\Documents\Work\Reports\                       │
│                                                     │
│ [查看详情]  [导出]  [在文件夹中打开]                │
└─────────────────────────────────────────────────────┘
```

**样式规范:**
- 项目高度: 最小 120px (自适应内容)
- 项目间距: 8px
- 内边距: 16px
- 背景: #FFFFFF
- 边框: 1px #E0E0E0
- 圆角: 8px
- 悬停: 阴影 0 2px 8px rgba(0,0,0,0.1)

**关键词高亮:**
- 背景: #FFEB3B (黄色高亮)
- 文字: #000000
- 粗体

**相关度分数:**
- 位置: 右上角
- 字体: 16px Bold
- 颜色:
  - 90-100%: #107C10 (绿色)
  - 70-89%: #FF8C00 (橙色)
  - <70%: #666666 (灰色)

**空状态 (无结果):**
```
┌─────────────────────────────────────────────────────┐
│                                                     │
│                  🔍                                 │
│                                                     │
│         未找到匹配的结果                             │
│                                                     │
│         尝试:                                        │
│         • 使用不同的关键词                           │
│         • 检查拼写                                   │
│         • 使用更通用的词汇                           │
│         • 切换到模糊搜索                             │
│                                                     │
└─────────────────────────────────────────────────────┘
```

#### 4.3.4 分页控制

```
┌─────────────────────────────────────────────────────┐
│    [<]  [1] [2] [3] ... [12] [>]      每页: [20 ▼] │
└─────────────────────────────────────────────────────┘
```

**样式:**
- 位置: 结果列表底部居中
- 按钮: 32x32px
- 当前页: 背景 #0078D4, 文字 #FFFFFF
- 其他页: 背景 #FFFFFF, 文字 #666666
- 禁用: 颜色 #CCCCCC

### 4.4 详细视图 (Detail View)

点击搜索结果后，在右侧或弹出窗口中显示完整内容。

#### 4.4.1 布局 (弹出窗口模式)

```
┌───────────────────────────────────────────────────────┐
│ 季度报告_2024.docx                          [_][□][×] │
├───────────────────────────────────────────────────────┤
│ [文档内容] [AI摘要] [元数据]                 [⚙]     │
├───────────────────────────────────────────────────────┤
│                                                       │
│  📄 季度报告_2024.docx                                │
│  ─────────────────────────────────────────────────   │
│                                                       │
│  【AI 生成摘要】                                       │
│  本文档是2024年第二季度业务报告，重点介绍了:           │
│  • 销售增长35%，主要来自新产品线                      │
│  • 客户满意度提升至92%                                │
│  • 市场份额扩大至18%                                  │
│                                                       │
│  【关键信息】                                          │
│  👤 人名: 张三 (销售总监), 李四 (产品经理)            │
│  📅 日期: 2024年4月-6月                               │
│  💰 金额: 营收 ¥5,200万, 利润 ¥980万                 │
│  📍 地点: 北京、上海、深圳                            │
│                                                       │
│  ═══════════════════════════════════════════════     │
│                                                       │
│  第二季度业务总结                                      │
│                                                       │
│  一、整体表现                                          │
│                                                       │
│  本季度公司实现了销售数据显著增长，第二季度            │
│  同比增长35%...                                       │
│                                                       │
│  (完整文档内容，关键词高亮显示)                        │
│                                                       │
└───────────────────────────────────────────────────────┘
```

#### 4.4.2 标签页

**文档内容标签:**
- 显示完整的文档文本
- 关键词高亮
- 支持文本选择和复制
- 滚动到第一个匹配位置

**AI 摘要标签:**
- 显示 AI 生成的摘要
- 显示关键信息提取结果
- 只在在线模式下可用
- 如果尚未生成,显示 [生成摘要] 按钮

**元数据标签:**
```
文件路径:    D:\Documents\Work\Reports\季度报告_2024.docx
文件大小:    2.5 MB
文件类型:    Microsoft Word 文档
创建时间:    2024-06-15 14:30
修改时间:    2024-06-20 09:15
索引时间:    2024-10-14 18:20
文档哈希:    a3f5b8c9d2e1...
页数:        15页
字数:        8,500字
作者:        张三
标题:        2024年Q2季度报告
关键词:      销售, 增长, 季度报告
```

#### 4.4.3 操作按钮

```
[📋 复制全文]  [📤 导出]  [📁 在文件夹中打开]  [✨ 生成摘要]
```

---

## 5. 对话框设计

### 5.1 新建索引对话框

```
┌───────────────────────────────────────────────────────┐
│ 新建索引                                     [_][×]   │
├───────────────────────────────────────────────────────┤
│                                                       │
│  步骤 1/3: 选择要索引的目录                            │
│  ───────────────────────────────────────────────     │
│                                                       │
│  索引名称:                                            │
│  ┌─────────────────────────────────────────────┐    │
│  │ 工作文档                                     │    │
│  └─────────────────────────────────────────────┘    │
│                                                       │
│  索引目录:                                            │
│  ┌─────────────────────────────────────────────┐    │
│  │ D:\Documents\Work                    [浏览...]│    │
│  └─────────────────────────────────────────────┘    │
│                                                       │
│  ☑ 包含子目录                                         │
│                                                       │
│  ───────────────────────────────────────────────     │
│                                                       │
│                          [取消]  [下一步 >]          │
│                                                       │
└───────────────────────────────────────────────────────┘
```

**步骤 2/3: 选择文件类型**
```
┌───────────────────────────────────────────────────────┐
│ 新建索引                                     [_][×]   │
├───────────────────────────────────────────────────────┤
│                                                       │
│  步骤 2/3: 选择文件类型                                │
│  ───────────────────────────────────────────────     │
│                                                       │
│  要索引的文件类型:                                     │
│                                                       │
│  ☑ Microsoft Office 文档                             │
│     ☑ Word (.docx, .doc)                             │
│     ☑ Excel (.xlsx, .xls)                            │
│     ☑ PowerPoint (.pptx, .ppt)                       │
│                                                       │
│  ☑ PDF 文档 (.pdf)                                    │
│     ☑ 启用 OCR 识别扫描版 PDF                        │
│                                                       │
│  ☑ 文本文件 (.txt, .md, .csv)                        │
│                                                       │
│  排除的目录:                                          │
│  ┌─────────────────────────────────────────────┐    │
│  │ node_modules, .git, temp                     │    │
│  └─────────────────────────────────────────────┘    │
│                                                       │
│  ───────────────────────────────────────────────     │
│                                                       │
│              [< 上一步]  [取消]  [下一步 >]          │
│                                                       │
└───────────────────────────────────────────────────────┘
```

**步骤 3/3: 确认并开始**
```
┌───────────────────────────────────────────────────────┐
│ 新建索引                                     [_][×]   │
├───────────────────────────────────────────────────────┤
│                                                       │
│  步骤 3/3: 确认设置                                    │
│  ───────────────────────────────────────────────     │
│                                                       │
│  索引名称:   工作文档                                  │
│  索引目录:   D:\Documents\Work                        │
│  文件类型:   Word, Excel, PowerPoint, PDF, 文本       │
│  OCR 功能:   已启用                                    │
│                                                       │
│  预计扫描:   约 5,432 个文件                          │
│  预计时间:   约 30-45 分钟                            │
│  预计大小:   约 2.5 GB                                │
│                                                       │
│  索引保存位置:                                         │
│  ┌─────────────────────────────────────────────┐    │
│  │ C:\Users\用户\Documents\SearchTool\Indexes   │    │
│  │ \WorkDocuments.idx            [浏览...]      │    │
│  └─────────────────────────────────────────────┘    │
│                                                       │
│  ☐ 完成后自动刷新索引 (每天)                          │
│                                                       │
│  ───────────────────────────────────────────────     │
│                                                       │
│            [< 上一步]  [取消]  [创建索引]            │
│                                                       │
└───────────────────────────────────────────────────────┘
```

### 5.2 索引进度对话框

```
┌───────────────────────────────────────────────────────┐
│ 正在创建索引: 工作文档                       [_][×]   │
├───────────────────────────────────────────────────────┤
│                                                       │
│  ████████████████░░░░░░░░░░  65%                     │
│                                                       │
│  当前文件: 年度总结报告_2024.docx                      │
│  已处理:   3,523 / 5,432 文件                         │
│  成功:     3,510                                      │
│  失败:     13                                         │
│  跳过:     0                                          │
│                                                       │
│  已用时间: 15分钟 32秒                                 │
│  剩余时间: 约 8分钟                                    │
│                                                       │
│  处理速度: 223 文件/分钟                               │
│  数据大小: 1.6 GB / 2.5 GB                            │
│                                                       │
│  ───────────────────────────────────────────────     │
│                                                       │
│  最近错误:                                            │
│  • 无法访问: locked_file.docx (文件被锁定)            │
│  • 解析失败: corrupted.pdf (文件损坏)                 │
│                                                       │
│                          [暂停]  [取消]              │
│                                                       │
└───────────────────────────────────────────────────────┘
```

**完成状态:**
```
┌───────────────────────────────────────────────────────┐
│ 索引创建完成                                 [_][×]   │
├───────────────────────────────────────────────────────┤
│                                                       │
│                      ✓                                │
│                                                       │
│           索引 "工作文档" 创建成功!                     │
│                                                       │
│  ───────────────────────────────────────────────     │
│                                                       │
│  总文件数:   5,432                                    │
│  成功索引:   5,419                                    │
│  失败:       13                                       │
│  索引大小:   2.5 GB                                   │
│  总耗时:     23分钟 45秒                               │
│                                                       │
│  ☐ 查看失败文件列表                                   │
│                                                       │
│  ───────────────────────────────────────────────     │
│                                                       │
│                              [完成]                   │
│                                                       │
└───────────────────────────────────────────────────────┘
```

### 5.3 设置对话框

```
┌───────────────────────────────────────────────────────┐
│ 设置                                         [_][×]   │
├──────────────┬────────────────────────────────────────┤
│              │                                        │
│ 常规         │  应用设置                               │
│ 索引         │  ───────────────────────────────       │
│ 搜索         │                                        │
│ AI 服务      │  界面主题:  (●) 跟随系统               │
│ 高级         │            ( ) 浅色主题                 │
│              │            ( ) 深色主题                 │
│              │                                        │
│              │  语言:      [简体中文 ▼]               │
│              │                                        │
│              │  启动选项:  ☑ 开机自动启动              │
│              │            ☐ 最小化到托盘               │
│              │                                        │
│              │  更新:      ☑ 自动检查更新              │
│              │                                        │
│              │  ───────────────────────────────       │
│              │                                        │
│              │                    [应用]  [确定]      │
│              │                                        │
└──────────────┴────────────────────────────────────────┘
```

**AI 服务标签:**
```
│ AI 服务      │  AI 服务配置                            │
│              │  ───────────────────────────────       │
│              │                                        │
│              │  服务提供商:  [DeepSeek ▼]             │
│              │                                        │
│              │  API Key:                              │
│              │  ┌────────────────────────────────┐   │
│              │  │ sk-********************************│   │
│              │  └────────────────────────────────┘   │
│              │  [测试连接]                            │
│              │                                        │
│              │  功能:      ☑ 启用智能摘要             │
│              │            ☑ 启用关键信息提取          │
│              │            ☑ 启用语义搜索              │
│              │                                        │
│              │  缓存设置:  缓存大小: [100] 条          │
│              │            [清理缓存]                  │
│              │                                        │
│              │  离线模式:  ( ) 始终在线               │
│              │            (●) 自动切换                │
│              │            ( ) 始终离线                │
```

---

## 6. 交互设计

### 6.1 关键交互流程

#### 6.1.1 创建索引流程

```
1. 用户点击 "新建索引" 按钮
   ↓
2. 打开新建索引向导对话框
   ↓
3. 步骤1: 输入名称和选择目录
   - 验证: 名称不能为空
   - 验证: 目录必须存在
   - 默认名称: 目录名称
   ↓
4. 步骤2: 选择文件类型
   - 默认: 全选常用类型
   - 提示: 建议启用 OCR
   ↓
5. 步骤3: 确认设置
   - 显示预估信息
   - 选择保存位置
   ↓
6. 点击 "创建索引"
   ↓
7. 显示进度对话框
   - 实时更新进度
   - 显示当前文件
   - 可暂停/取消
   ↓
8. 索引完成
   - 显示成功消息
   - 自动加载新索引
   - 切换到搜索界面
```

#### 6.1.2 搜索流程

```
1. 用户在搜索框输入关键词
   ↓
2. 自动完成显示历史搜索 (可选)
   ↓
3. 用户按 Enter 或点击 "搜索" 按钮
   ↓
4. 显示加载指示器
   ↓
5. 执行搜索 (后台线程)
   - 如果在线: 调用 AI 优化查询
   - 查询数据库
   - 计算相关度
   - 生成结果列表
   ↓
6. 显示搜索结果
   - 更新结果计数和耗时
   - 高亮关键词
   - 显示相关度分数
   ↓
7. 用户点击某个结果
   ↓
8. 打开详细视图
   - 加载完整内容
   - 如果在线且未生成: 显示 "生成摘要" 按钮
   - 滚动到第一个匹配位置
```

#### 6.1.3 AI 摘要生成流程

```
1. 用户在详细视图点击 "生成摘要"
   ↓
2. 检查在线状态
   - 如果离线: 显示错误提示
   ↓
3. 检查缓存
   - 如果已生成: 直接显示
   ↓
4. 显示生成中指示器
   ↓
5. 调用 DeepSeek API (后台)
   - 构建 Prompt
   - 发送请求
   - 处理响应
   ↓
6. 显示生成结果
   - 摘要文本
   - 关键要点
   - 提取的实体
   ↓
7. 保存到数据库和缓存
```

### 6.2 快捷键

| 操作 | 快捷键 | 说明 |
|------|--------|------|
| 搜索 | Ctrl+F | 聚焦搜索框 |
| 新建索引 | Ctrl+N | 打开新建索引向导 |
| 刷新索引 | Ctrl+R | 刷新当前选中的索引 |
| 设置 | Ctrl+, | 打开设置对话框 |
| 切换主题 | Ctrl+T | 切换浅色/深色主题 |
| 关闭窗口 | Ctrl+W | 关闭当前窗口 |
| 退出 | Alt+F4 | 退出应用 |
| 下一个结果 | ↓ | 选择下一个搜索结果 |
| 上一个结果 | ↑ | 选择上一个搜索结果 |
| 复制 | Ctrl+C | 复制选中文本 |
| 全选 | Ctrl+A | 全选内容 |

### 6.3 反馈机制

#### 6.3.1 加载状态

**搜索加载:**
```
🔄 正在搜索...
```

**索引加载:**
```
📊 正在加载索引...
```

**AI 处理:**
```
✨ AI 正在生成摘要...
```

#### 6.3.2 成功反馈

**Toast 通知 (右下角):**
```
┌─────────────────────────────┐
│ ✓ 索引创建成功               │
│   5,432 个文件已索引         │
└─────────────────────────────┘
```

- 显示时间: 3 秒
- 位置: 右下角
- 背景: #107C10 (绿色)
- 文字: #FFFFFF

#### 6.3.3 错误反馈

**Toast 通知:**
```
┌─────────────────────────────┐
│ ✗ 索引创建失败               │
│   目录不存在或无权限访问      │
│   [查看详情]                 │
└─────────────────────────────┘
```

- 显示时间: 5 秒
- 背景: #D13438 (红色)
- 文字: #FFFFFF
- 可点击查看详细错误信息

#### 6.3.4 警告反馈

**Toast 通知:**
```
┌─────────────────────────────┐
│ ⚠ AI 服务暂时不可用          │
│   已切换到离线模式            │
└─────────────────────────────┘
```

- 显示时间: 4 秒
- 背景: #FF8C00 (橙色)
- 文字: #FFFFFF

---

## 7. 响应式设计

### 7.1 窗口大小适配

**最小窗口尺寸:** 1024x768
**推荐窗口尺寸:** 1280x800 或更大

**小窗口适配 (< 1200px 宽):**
- 隐藏左侧索引面板，改为下拉菜单
- 搜索结果列表项高度减小
- 详细视图使用全屏模式

**大屏幕适配 (> 1600px 宽):**
- 增加搜索结果列表宽度
- 详细视图使用侧边面板而非弹窗
- 显示更多元数据信息

### 7.2 DPI 适配

支持高 DPI 屏幕 (150%, 200%, 300%)：
- 使用矢量图标
- 文字清晰渲染
- 自动缩放界面元素

---

## 8. 可访问性

### 8.1 键盘导航

- 所有功能可通过键盘访问
- Tab 键在控件间切换
- 焦点指示清晰可见
- 支持屏幕阅读器

### 8.2 对比度

- 符合 WCAG 2.1 AA 级标准
- 文字与背景对比度 ≥ 4.5:1
- 大文字对比度 ≥ 3:1

### 8.3 文字大小

- 支持系统字体缩放
- 最小文字大小 11px
- 主要内容 14px

---

## 9. 动画与过渡

### 9.1 过渡动画

```css
/* 通用过渡 */
transition: all 0.2s ease-in-out;

/* 颜色变化 */
transition: background-color 0.15s ease;

/* 尺寸变化 */
transition: width 0.3s ease, height 0.3s ease;

/* 透明度变化 */
transition: opacity 0.2s ease;
```

### 9.2 加载动画

**旋转加载器:**
```
⟳ 旋转动画, 1秒一圈
```

**进度条动画:**
```
平滑填充, 宽度变化 0.3s ease
```

### 9.3 列表动画

**项目进入:**
- 淡入 + 向上滑动
- 持续时间: 0.2s
- 延迟: 每项 0.05s

---

## 10. 性能优化

### 10.1 渲染优化

- 虚拟滚动: 只渲染可见的结果项
- 懒加载: 图片和详细内容按需加载
- 节流: 搜索输入节流 300ms

### 10.2 体验优化

- 骨架屏: 加载时显示内容占位符
- 乐观更新: 立即显示操作结果
- 后台处理: 耗时操作不阻塞 UI

---

## 11. 品牌与风格

### 11.1 应用图标

- 设计: 放大镜 + 文档
- 颜色: Windows Blue (#0078D4)
- 尺寸: 支持多种尺寸 (16x16 到 256x256)

### 11.2 加载界面

```
┌───────────────────────────┐
│                           │
│     [应用图标]             │
│                           │
│  Windows Search Tool      │
│                           │
│     ⟳ 加载中...           │
│                           │
└───────────────────────────┘
```

---

## 12. 下一步

完成 UX 规格后，建议：

1. **创建交互原型** - 使用 Figma 或类似工具
2. **进行可用性测试** - 邀请目标用户测试流程
3. **生成详细用户故事** - 将 UX 设计转化为开发任务
4. **开始 UI 开发** - 按照规格实现界面

---

**文档版本:** 1.0
**最后更新:** 2025-10-16
**审核状态:** Draft
**下一步:** 生成详细用户故事
