# 多索引库功能使用指南

## 快速开始

### 步骤 1: 创建新的索引库

1. 启动程序
2. 点击顶部的**索引库选择器**（显示当前选择的库）
3. 点击"管理"按钮
4. 点击"添加索引库"
5. 选择一个 `.db` 文件位置（例如 `C:/Users/你的用户名/Documents/测试1.db`）
6. 输入库名称（例如 "测试1"）
7. 确认

### 步骤 2: 启用要使用的索引库

1. 点击索引库选择器
2. 勾选你要使用的库（例如只勾选"测试1"）
3. 取消勾选不需要的库（例如取消"默认索引库"）
4. 点击"确定"

现在顶部会显示：**测试1** 或 **1 个索引库**

### 步骤 3: 添加目录到索引库

1. 点击 **📁 添加目录** 按钮
2. 选择要索引的文件夹（例如 `E:\索引测试`）
3. **弹出索引库选择对话框**
4. 列表中会显示所有启用的库：
   ```
   📚 测试1
   ```
5. 选择"测试1"（已默认选中）
6. 查看底部信息确认：
   ```
   库名称: 测试1
   数据库: C:/Users/.../测试1.db
   文档数: 0
   ```
7. 点击 **确定** 按钮（或按 Enter 键）
8. 等待索引完成

状态栏会显示：`[测试1] document.pdf (50/392)`

### 步骤 4: 验证索引成功

1. 点击 **🔄 更新索引** 按钮
2. 查看更新进度对话框：
   ```
   ┌─ 测试1 ─────────────────┐
   │ ✓ 完成                  │
   │ ████████████████  100%  │
   │ 新增: 392 | 更新: 0 | 删除: 0 │
   └─────────────────────────┘
   ```

**成功！** 现在"测试1"库有 392 个文件了。

### 步骤 5: 搜索文件

1. 在搜索框输入关键词
2. 按 Enter 搜索
3. 结果会显示来自"测试1"的文件
4. "索引库"列显示文件来源

## 常见问题

### Q1: 为什么我的索引库显示"空索引库，无需更新"？

**原因**：该库的数据库中没有任何文件。

**解决**：
1. 禁用其他库，只启用该库
2. 使用"添加目录"功能重新索引
3. 确保选择对话框中选择了正确的库
4. 等待索引完成

### Q2: 如何把文件从一个库移到另一个库？

**方法 1**（推荐）：
1. 启用目标库
2. 禁用其他库
3. 重新"添加目录"
4. 选择目标库

**方法 2**：
1. 导出数据（暂不支持）
2. 导入到新库（暂不支持）

### Q3: 如何知道文件被添加到了哪个库？

**方法 1** - 查看状态栏：
- 索引时显示：`[库名] 文件名`

**方法 2** - 搜索结果：
- 搜索后，"索引库"列显示来源

**方法 3** - 更新索引：
- 点击"更新索引"查看每个库的文件统计

### Q4: 多个库同时启用时，添加目录到哪个库？

**答**：会弹出选择对话框，让你选择目标库。如果只启用一个库，则自动添加到该库。

### Q5: 目录不存在时会怎样？

**答**：更新索引时：
- 会显示 **○ 已跳过 - 索引目录不存在，保留原有内容**
- 数据库中的内容完整保留
- 仍然可以搜索到这些文件的内容
- 等目录恢复后再更新即可

## 最佳实践

### 推荐场景 1: 按用途分类

```
📚 工作文档（只启用）
   - C:\工作\项目A
   - C:\工作\项目B

📚 个人资料（禁用）
   - D:\个人\照片
   - D:\个人\文档

📚 学习资料（禁用）
   - E:\学习\课程
```

**操作**：
1. 创建 3 个索引库
2. 每次只启用需要搜索的库
3. 添加对应的目录

### 推荐场景 2: 按设备分类

```
📚 本地磁盘（始终启用）
   - C:\Users\Documents
   - D:\Projects

📚 移动硬盘（连接时启用）
   - E:\Backup
   - E:\Archives

📚 U盘（偶尔启用）
   - F:\Portable
```

**优势**：
- 移动设备未连接时自动跳过
- 内容保留，仍可搜索
- 设备连接后正常更新

### 推荐场景 3: 按时间分类

```
📚 当前项目（启用）
   - 2025 年的文档

📚 归档项目（禁用）
   - 2024 年及以前
```

## 高级技巧

### 技巧 1: 快速切换搜索范围

1. 点击索引库选择器
2. 全选 → 搜索所有库
3. 单选 → 只搜索一个库
4. 多选 → 搜索部分库

### 技巧 2: 查看库的详细信息

1. 点击索引库选择器
2. 点击"管理"
3. 查看每个库的：
   - 数据库位置
   - 文档数量
   - 大小
   - 创建时间

### 技巧 3: 软删除保护

文件从文件系统删除后：
- 更新索引时自动标记为 `deleted`
- 内容完整保留在数据库
- 仍然可以搜索到
- 可以查看原始内容

### 技巧 4: 批量管理

1. 禁用所有不需要的库
2. 只启用需要批量操作的库
3. 执行操作（更新/搜索）
4. 恢复原来的启用状态

## 故障排除

### 问题：索引库是空的

**检查**：
```
1. 是否正确添加了目录？
2. 添加时是否选择了正确的库？
3. 是否有权限访问该目录？
```

**解决**：
1. 禁用其他库
2. 只启用目标库
3. 重新添加目录
4. 选择对话框中确认选择了该库

### 问题：搜索不到文件

**检查**：
```
1. 该库是否启用？
2. 文件是否被索引？
3. 关键词是否正确？
```

**解决**：
1. 检查索引库选择器状态
2. 点击"更新索引"查看文件数
3. 尝试不同的关键词

### 问题：更新索引很慢

**原因**：
- 文件数量太多
- 磁盘速度慢
- 同时更新多个库

**优化**：
1. 只启用需要更新的库
2. 分批更新
3. 关闭其他程序

## 总结

**核心流程**：
1. 创建库 → 2. 启用库 → 3. 添加目录（选择库）→ 4. 搜索

**关键点**：
- ✅ 添加目录时会弹出选择对话框
- ✅ 只有启用的库才能被搜索
- ✅ 更新索引时显示每个库的状态
- ✅ 目录不存在时内容会被保留

祝你使用愉快！🎉
